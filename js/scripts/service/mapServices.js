define(["app","async!//maps.google.com/maps/api/js?v=3&sensor=false"],function(a){a.service("MapService",function(){var a,b=window.google.maps,c={zoom:15,draggable:!0,mapTypeId:b.MapTypeId.ROADMAP,panControl:!1,disableDoubleClickZoom:!0,disableDefaultUI:!0,zoomControl:!1};this.initialize=function(d,e){var f=d.latitude||41.8902,g=d.longitude||12.4923,h=new b.Map(document.getElementById(e),c);a?(d.latitude=a.lat(),d.longitude=a.lng()):a=new b.LatLng(f,g),h.setCenter(a);var i=new b.Marker({position:a,draggable:!0,map:h});b.event.addListener(i,"dragend",function(b){a=b.latLng,d.latitude=a.lat(),d.longitude=a.lng(),d.$apply(function(){i.setPosition(a)})})}})});